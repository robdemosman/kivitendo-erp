[%- USE T8 %]
[%- USE HTML %]
[%- USE L %]
[%- USE LxERP %]

[% L.hidden_tag("_include_cvars_from_form", 1) %]

<table id="filter_table">
 <tr>
  <th align="right">[% 'Number' | $T8 %]</th>
  <td>[% L.input_tag('filter.projectnumber:substr::ilike', filter.projectnumber_substr__ilike, size=60) %]</td>
 </tr>

 <tr>
  <th align="right">[% 'Description' | $T8 %]</th>
  <td>[% L.input_tag('filter.description:substr::ilike', filter.description_substr__ilike, size=60, class='initial_focus') %]</td>
 </tr>

 <tr>
  <th align="right">[% 'Customer' | $T8 %]</th>
  <td>[% L.input_tag('filter.customer.name:substr::ilike', filter.customer.name_substr__ilike, size=60) %]</td>
 </tr>

 <tr>
  <th align="right">[% 'Project Type' | $T8 %]</th>
  <td>[% L.select_tag('filter.project_type_id', SELF.project_types, default=filter.project_type_id, title_key='description', with_empty=1, style="width: 200px") %]</td>
 </tr>

 <tr>
  <th align="right">[% 'Project Status' | $T8 %]</th>
  <td>[% L.select_tag('filter.project_status_id', SELF.project_statuses, default=filter.project_status_id, title_key='description', with_empty=1, style="width: 200px") %]</td>
 </tr>

 [% FOREACH cvar_cfg = SELF.cvar_configs %]
  [%- IF cvar_cfg.searchable %]
   <tr>
    <th align="right">[% HTML.escape(cvar_cfg.description) %]</th>
    <td>[% INCLUDE 'common/render_cvar_filter_input.html' cvar_cfg=cvar_cfg cvar_class="rs_input_field" %]</td>
   </tr>
  [% END %]
 [% END %]

 <tr>
  <th>[% 'Include in Report' | $T8 %]</th>
  <td>
   <table>
    <tr>
     <td>[% L.select_tag('filter.active', [ [ 'active', LxERP.t8('Active') ], [ 'inactive', LxERP.t8('Inactive') ], [ 'both', LxERP.t8('Both') ] ], default=filter.active, style="width: 200px") %]</td>
    </tr>

    <tr>
     <td>[% L.select_tag('filter.valid', [ [ 'valid', LxERP.t8('Valid') ], [ 'invalid', LxERP.t8('Invalid') ], [ 'both', LxERP.t8('Both') ] ], default=filter.valid, style="width: 200px") %]</td>
    </tr>

    <tr>
     <td>[% L.select_tag('filter.status', [ [ 'all', LxERP.t8('All') ], [ 'orphaned', LxERP.t8('Orphaned') ] ], default=filter.status, style="width: 200px") %]</td>
    </tr>

    [% FOREACH cvar_cfg = SELF.includeable_cvar_configs %]
     <tr>
      <td>
       [% name__ = cvar_cfg.name;
          L.checkbox_tag("include_cvars_" _ name__, value="1", checked=(SELF.include_cvars.$name__ ? 1 : ''), label=cvar_cfg.description) %]
      </td>
     </tr>
    [% END %]

   </table>
  </td>
 </tr>
</table>

[% L.button_tag('$("#search_form").resetForm()', LxERP.t8('Reset')) %]
